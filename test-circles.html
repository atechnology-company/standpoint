<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Circle Positioning Test</title>
		<style>
			body {
				margin: 0;
				padding: 20px;
				background: black;
				color: white;
				font-family: Arial, sans-serif;
			}
			.test-container {
				background: #1a1a1a;
				border: 1px solid #333;
				border-radius: 8px;
				padding: 20px;
				margin-bottom: 20px;
			}
			.chart-test {
				width: 400px;
				height: 400px;
				background: #222;
				border: 1px solid #444;
				position: relative;
			}
			svg {
				width: 100%;
				height: 100%;
			}
		</style>
	</head>
	<body>
		<h1>Mean/Median Circle Positioning Test</h1>

		<div class="test-container">
			<h2>Test Case 1: Valid Average2D Data</h2>
			<p>Average2D: [0.3, 0.6] - Should show white circle at 30% from left, 60% from top</p>
			<div class="chart-test" id="test1">
				<svg viewBox="0 0 1 1" preserveAspectRatio="none">
					<!-- Triangle shape -->
					<path
						d="M 0.5 0.15 L 0.85 0.85 L 0.15 0.85 Z"
						stroke="rgba(255, 255, 255, 0.3)"
						stroke-width="0.003"
						fill="rgba(255, 255, 255, 0.05)"
					/>
					<!-- Valid average circle -->
					<circle cx="0.3" cy="0.6" r="0.025" fill="white" class="average-point" />
					<!-- Labels for reference -->
					<text x="0.1" y="0.1" fill="white" font-size="0.04">Valid Circle</text>
				</svg>
			</div>
		</div>

		<div class="test-container">
			<h2>Test Case 2: Default (0,0) Coordinates - Should NOT Show Circle</h2>
			<p>Average2D: [0, 0] - Circle should be hidden due to validation</p>
			<div class="chart-test" id="test2">
				<svg viewBox="0 0 1 1" preserveAspectRatio="none">
					<!-- Triangle shape -->
					<path
						d="M 0.5 0.15 L 0.85 0.85 L 0.15 0.85 Z"
						stroke="rgba(255, 255, 255, 0.3)"
						stroke-width="0.003"
						fill="rgba(255, 255, 255, 0.05)"
					/>
					<!-- This circle should be hidden by our validation logic -->
					<!-- <circle cx="0" cy="0" r="0.025" fill="white" class="average-point"/> -->
					<text x="0.1" y="0.1" fill="white" font-size="0.04">No Circle (0,0)</text>
				</svg>
			</div>
		</div>

		<div class="test-container">
			<h2>Test Case 3: Firebase Data with Real Votes</h2>
			<p>Average2D: [0.65, 0.45] - Should show circle at calculated position</p>
			<div class="chart-test" id="test3">
				<svg viewBox="0 0 1 1" preserveAspectRatio="none">
					<!-- Triangle shape -->
					<path
						d="M 0.5 0.15 L 0.85 0.85 L 0.15 0.85 Z"
						stroke="rgba(255, 255, 255, 0.3)"
						stroke-width="0.003"
						fill="rgba(255, 255, 255, 0.05)"
					/>
					<!-- Vote points -->
					<circle cx="0.6" cy="0.4" r="0.008" fill="rgba(255, 255, 255, 0.8)" />
					<circle cx="0.7" cy="0.5" r="0.008" fill="rgba(255, 255, 255, 0.8)" />
					<circle cx="0.65" cy="0.45" r="0.008" fill="rgba(255, 255, 255, 0.8)" />
					<!-- Average circle -->
					<circle cx="0.65" cy="0.45" r="0.025" fill="white" class="average-point" />
					<!-- Standard deviation circle -->
					<circle
						cx="0.65"
						cy="0.45"
						r="0.1"
						fill="none"
						stroke="rgba(255, 255, 255, 0.2)"
						stroke-width="0.002"
						stroke-dasharray="0.01, 0.01"
					/>
					<text x="0.1" y="0.1" fill="white" font-size="0.04">Real Data</text>
				</svg>
			</div>
		</div>

		<div class="test-container">
			<h2>Our Implementation Logic</h2>
			<pre
				style="
					background: #111;
					padding: 10px;
					border-radius: 4px;
					font-size: 12px;
					line-height: 1.4;
				"
			>
// Chart Renderer Validation (line 274-279):
if (typeof cx === 'number' && typeof cy === 'number' && 
    !isNaN(cx) && !isNaN(cy) && 
    (cx !== 0 || cy !== 0) && // Don't show if at default (0,0)
    cx >= 0 && cx <= 1 && cy >= 0 && cy <= 1) {
    // Draw the circle
}

// Polls Page Validation (line 322-324):
const average2D = (stats.average_2d && stats.average_2d.length === 2 && 
    (stats.average_2d[0] !== 0 || stats.average_2d[1] !== 0)) ? 
    stats.average_2d : null;
        </pre
			>
		</div>

		<script>
			console.log('Test page loaded. Check for circles in the test cases above.');
			console.log('Test 1: Should show white circle at (0.3, 0.6)');
			console.log('Test 2: Should NOT show any circle (validates against 0,0)');
			console.log('Test 3: Should show circle at (0.65, 0.45) with std dev ring');
		</script>
	</body>
</html>
